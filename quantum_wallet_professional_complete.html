<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QRC Wallet - Quantum Resistant Blockchain</title>
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect width='100' height='100' fill='%2300ff88' rx='20'/></svg>">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif; background: linear-gradient(135deg, #0f0f23 0%, #1a1a3e 100%); color: #ffffff; min-height: 100vh; display: flex; flex-direction: column; align-items: center; padding: 20px; }
        .main-header { width: 100%; max-width: 1200px; display: flex; justify-content: space-between; align-items: center; margin-bottom: 40px; padding: 20px 0; }
        .logo-section { display: flex; align-items: center; gap: 15px; }
        .logo { width: 50px; height: 50px; background: #00ff88; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-weight: bold; color: #000; }
        .logo-text { font-size: 24px; font-weight: 700; }
        .nav-links { display: flex; gap: 30px; align-items: center; }
        .nav-link { color: #999; text-decoration: none; transition: color 0.3s; font-size: 14px; cursor: pointer; }
        .nav-link:hover { color: #00ff88; }
        .network-indicator { display: flex; align-items: center; gap: 8px; background: rgba(0, 255, 136, 0.1); padding: 8px 16px; border-radius: 20px; font-size: 12px; }
        .network-dot { width: 8px; height: 8px; background: #00ff88; border-radius: 50%; animation: pulse 2s infinite; }
        .main-content { width: 100%; max-width: 1200px; display: grid; grid-template-columns: 1fr 1fr; gap: 40px; margin-bottom: 40px; }
        .stats-section { display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; }
        .stat-card { background: rgba(255, 255, 255, 0.05); padding: 24px; border-radius: 16px; backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.1); transition: all 0.3s ease; }
        .stat-card:hover { transform: translateY(-5px); background: rgba(255, 255, 255, 0.08); }
        .stat-value { font-size: 32px; font-weight: 700; color: #00ff88; margin-bottom: 5px; }
        .stat-label { font-size: 12px; color: #999; text-transform: uppercase; letter-spacing: 1px; }
        .wallet-section { background: rgba(255, 255, 255, 0.05); padding: 40px; border-radius: 24px; backdrop-filter: blur(20px); border: 1px solid rgba(255, 255, 255, 0.1); box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3); }
        .wallet-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; }
        .wallet-title { font-size: 20px; font-weight: 600; }
        .wallet-menu { display: flex; gap: 10px; }
        .menu-button { background: none; border: none; color: #999; cursor: pointer; padding: 8px; transition: color 0.3s; }
        .menu-button:hover { color: #00ff88; }
        .onboarding-section { text-align: center; padding: 40px 0; }
        .onboarding-title { font-size: 28px; margin-bottom: 10px; background: linear-gradient(45deg, #00ff88, #00ffff); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .onboarding-subtitle { color: #999; margin-bottom: 30px; font-size: 16px; }
        .security-features { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 40px; }
        .security-feature { background: rgba(255, 255, 255, 0.05); padding: 20px; border-radius: 12px; border: 1px solid rgba(255, 255, 255, 0.1); }
        .feature-icon { font-size: 32px; margin-bottom: 10px; }
        .feature-title { font-size: 16px; margin-bottom: 5px; }
        .feature-desc { font-size: 13px; color: #999; }
        .wallet-display { background: rgba(0, 0, 0, 0.3); padding: 24px; border-radius: 16px; margin-bottom: 30px; }
        .wallet-address-container { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .wallet-label { font-size: 12px; color: #999; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 8px; }
        .wallet-address { font-family: 'Courier New', monospace; font-size: 14px; word-break: break-all; cursor: pointer; transition: color 0.3s; }
        .wallet-address:hover { color: #00ff88; }
        .address-actions { display: flex; gap: 10px; }
        .balance-display { text-align: center; padding: 30px 0; border-bottom: 1px solid rgba(255, 255, 255, 0.1); margin-bottom: 30px; }
        .balance-label { font-size: 14px; color: #999; margin-bottom: 10px; }
        .balance-amount { font-size: 48px; font-weight: 700; background: linear-gradient(45deg, #00ff88, #00ffff); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 5px; }
        .balance-usd { font-size: 18px; color: #999; }
        .button { width: 100%; padding: 16px; border: none; border-radius: 12px; font-size: 16px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; margin-bottom: 12px; display: flex; align-items: center; justify-content: center; gap: 10px; }
        .button-primary { background: linear-gradient(45deg, #00ff88, #00cc77); color: #000; }
        .button-primary:hover { transform: translateY(-2px); box-shadow: 0 10px 20px rgba(0, 255, 136, 0.3); }
        .button-secondary { background: transparent; color: #00ff88; border: 2px solid #00ff88; }
        .button-secondary:hover { background: #00ff88; color: #000; }
        .button-create { background: linear-gradient(45deg, #00ff88, #00cc77); color: #000; padding: 18px 40px; font-size: 18px; width: auto; margin: 0 auto 20px; }
        .tabs { display: flex; border-bottom: 1px solid rgba(255, 255, 255, 0.1); margin-bottom: 30px; }
        .tab { padding: 12px 24px; cursor: pointer; color: #999; transition: all 0.3s; border-bottom: 2px solid transparent; }
        .tab.active { color: #00ff88; border-bottom-color: #00ff88; }
        .tab:hover { color: #00ff88; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .transaction-item { background: rgba(255, 255, 255, 0.05); padding: 16px; border-radius: 12px; margin-bottom: 12px; display: flex; justify-content: space-between; align-items: center; transition: all 0.3s; }
        .transaction-item:hover { background: rgba(255, 255, 255, 0.08); }
        .qr-container { background: #fff; padding: 30px; border-radius: 16px; text-align: center; }
        .qr-title { color: #000; font-size: 18px; margin-bottom: 20px; }
        #qrcode, #receiveQrcode { margin: 0 auto 20px; display: inline-block; }
        .qr-address { background: #f5f5f5; padding: 12px; border-radius: 8px; font-family: 'Courier New', monospace; font-size: 12px; color: #000; word-break: break-all; margin-bottom: 20px; }
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.9); align-items: center; justify-content: center; z-index: 1000; padding: 20px; }
        .modal-content { background: #1a1a3e; padding: 40px; border-radius: 24px; max-width: 500px; width: 100%; max-height: 90vh; overflow-y: auto; animation: fadeIn 0.3s ease-out; }
        .modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; }
        .modal-title { font-size: 24px; font-weight: 600; }
        .close-modal { background: none; border: none; color: #999; font-size: 24px; cursor: pointer; padding: 0; width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; border-radius: 50%; transition: all 0.3s; }
        .close-modal:hover { background: rgba(255, 255, 255, 0.1); color: #fff; }
        .important-notice { background: rgba(255, 107, 107, 0.1); border: 1px solid #ff6b6b; border-radius: 12px; padding: 20px; margin-bottom: 30px; }
        .notice-title { font-size: 16px; font-weight: 600; margin-bottom: 10px; display: flex; align-items: center; gap: 8px; }
        .notice-content { font-size: 14px; line-height: 1.6; }
        .notice-list { margin-top: 12px; margin-left: 20px; }
        .notice-list li { margin-bottom: 8px; }
        .seed-phrase-container { background: rgba(0, 0, 0, 0.5); padding: 30px; border-radius: 12px; margin-bottom: 30px; }
        .seed-phrase-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 12px; margin-bottom: 20px; }
        .seed-word { background: rgba(255, 255, 255, 0.05); padding: 12px; border-radius: 8px; text-align: center; font-family: 'Courier New', monospace; }
        .seed-word-number { font-size: 12px; color: #999; margin-bottom: 4px; }
        .seed-word-text { font-size: 14px; font-weight: 600; }
        .algorithm-badge { display: inline-flex; align-items: center; gap: 8px; background: rgba(0, 255, 136, 0.1); padding: 6px 12px; border-radius: 20px; font-size: 12px; color: #00ff88; margin-bottom: 20px; }
        .algorithm-badge .badge-icon { width: 16px; height: 16px; background: #00ff88; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 10px; color: #000; font-weight: bold; }
        .notification { position: fixed; bottom: 20px; right: 20px; background: #00ff88; color: #000; padding: 16px 24px; border-radius: 12px; font-weight: 600; animation: slideIn 0.3s ease-out; display: none; z-index: 2000; max-width: 400px; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3); }
        .notification.error { background: #ff6b6b; color: #fff; }
        .notification.warning { background: #ffa500; color: #000; }
        .notification.info { background: #3498db; color: #fff; }
        
        /* FAQ Section - RESTORED */
        .faq-section { margin-top: 40px; background: rgba(255, 255, 255, 0.05); padding: 40px; border-radius: 24px; backdrop-filter: blur(20px); border: 1px solid rgba(255, 255, 255, 0.1); width: 100%; max-width: 1200px; }
        .faq-header { text-align: center; margin-bottom: 40px; }
        .faq-title { font-size: 24px; margin-bottom: 10px; }
        .faq-subtitle { color: #999; }
        .faq-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; }
        .faq-item { background: rgba(255, 255, 255, 0.05); padding: 24px; border-radius: 12px; cursor: pointer; transition: all 0.3s; }
        .faq-item:hover { background: rgba(255, 255, 255, 0.08); }
        .faq-question { font-size: 16px; font-weight: 600; margin-bottom: 12px; display: flex; justify-content: space-between; align-items: center; }
        .faq-answer { font-size: 14px; color: #999; line-height: 1.6; display: none; }
        .faq-item.expanded .faq-answer { display: block; }
        
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes pulse { 0%, 100% { transform: scale(1); opacity: 1; } 50% { transform: scale(1.2); opacity: 0.8; } }
        @keyframes slideIn { from { opacity: 0; transform: translateX(100px); } to { opacity: 1; transform: translateX(0); } }
        @keyframes spin { to { transform: rotate(360deg); } }
        @media (max-width: 968px) { .main-content { grid-template-columns: 1fr; } }
        @media (max-width: 768px) { .main-header { flex-direction: column; gap: 20px; } .nav-links { flex-wrap: wrap; justify-content: center; } .stats-section { grid-template-columns: 1fr; } .wallet-section { padding: 24px; } .balance-amount { font-size: 36px; } .faq-grid { grid-template-columns: 1fr; } }
    </style>
</head>
<body>
    <header class="main-header">
        <div class="logo-section">
            <div class="logo">QRC</div>
            <div class="logo-text">Quantum Wallet</div>
        </div>
        <nav class="nav-links">
            <a class="nav-link" onclick="showNotification('Explorer coming soon! View all blockchain transactions.', 'info')">Explorer</a>
            <a class="nav-link" onclick="showNotification('Bridge feature coming soon! Cross-chain swaps.', 'info')">Bridge</a>
            <a class="nav-link" onclick="showNotification('Governance coming soon! Vote on proposals.', 'info')">Governance</a>
            <a class="nav-link" onclick="window.open('https://docs.qrcblockchain.com', '_blank')">Docs</a>
            <div class="network-indicator">
                <div class="network-dot"></div>
                <span>Mainnet</span>
            </div>
        </nav>
    </header>

    <div class="main-content">
        <div class="stats-section">
            <div class="stat-card">
                <div class="stat-value" id="currentTPS">0</div>
                <div class="stat-label">Current TPS</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="totalBlocks">0</div>
                <div class="stat-label">Total Blocks</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="totalTransactions">0</div>
                <div class="stat-label">Transactions</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="activeUsers">0</div>
                <div class="stat-label">Active Users</div>
            </div>
        </div>

        <div class="wallet-section">
            <div class="wallet-header">
                <h2 class="wallet-title">Quantum Resistant Wallet</h2>
                <div class="wallet-menu">
                    <button class="menu-button" onclick="showNotification('Settings coming soon! Configure network & preferences.', 'info')">⚙️</button>
                    <button class="menu-button" onclick="showNotification('Need help? Visit docs.qrcblockchain.com', 'info')">❓</button>
                </div>
            </div>

            <div class="algorithm-badge">
                <div class="badge-icon">✓</div>
                <span>Protected by CRYSTALS-Dilithium</span>
            </div>

            <div id="onboardingSection" class="onboarding-section">
                <h1 class="onboarding-title">Welcome to the Future of Crypto</h1>
                <p class="onboarding-subtitle">The world's first quantum-resistant blockchain wallet</p>
                
                <div class="security-features">
                    <div class="security-feature">
                        <div class="feature-icon">🔐</div>
                        <div class="feature-title">Dilithium Protected</div>
                        <div class="feature-desc">NIST-approved quantum-resistant signatures</div>
                    </div>
                    <div class="security-feature">
                        <div class="feature-icon">⚡</div>
                        <div class="feature-title">Lightning Fast</div>
                        <div class="feature-desc">1,773 TPS proven performance</div>
                    </div>
                    <div class="security-feature">
                        <div class="feature-icon">🔒</div>
                        <div class="feature-title">Your Keys, Your Coins</div>
                        <div class="feature-desc">Non-custodial wallet with full control</div>
                    </div>
                </div>

                <button class="button button-create" onclick="showCreateWalletModal()">
                    <span>🚀</span>
                    <span>Create New Wallet</span>
                </button>
                
                <p style="text-align: center; color: #999; font-size: 14px;">
                    Already have a wallet? 
                    <a href="#" onclick="showNotification('Import feature coming soon! Use seed phrase or private key.', 'info')" style="color: #00ff88;">Import using seed phrase</a>
                </p>
            </div>

            <div id="walletDisplaySection" style="display: none;">
                <div class="wallet-display">
                    <div class="wallet-label">Your Wallet Address</div>
                    <div class="wallet-address-container">
                        <div class="wallet-address" id="walletAddress" onclick="copyAddress()"></div>
                        <div class="address-actions">
                            <button class="menu-button" onclick="showQRModal()" title="Show QR Code">📱</button>
                            <button class="menu-button" onclick="copyAddress()" title="Copy Address">📋</button>
                        </div>
                    </div>
                </div>

                <div class="balance-display">
                    <div class="balance-label">Total Balance</div>
                    <div class="balance-amount" id="balanceAmount">0.00 QRC</div>
                    <div class="balance-usd" id="balanceUSD">≈ $0.00 USD</div>
                </div>

                <div class="tabs">
                    <div class="tab active" onclick="showTab('wallet')">Wallet</div>
                    <div class="tab" onclick="showTab('activity')">Activity</div>
                    <div class="tab" onclick="showTab('security')">Security</div>
                </div>

                <div id="walletTab" class="tab-content active">
                    <button class="button button-primary" onclick="showSendModal()">
                        <span>📤</span>
                        <span>Send QRC</span>
                    </button>
                    <button class="button button-secondary" onclick="showReceiveModal()">
                        <span>📥</span>
                        <span>Receive</span>
                    </button>
                    <button class="button button-secondary" onclick="getFaucet()">
                        <span>💧</span>
                        <span>Test Faucet (Once per day)</span>
                    </button>
                </div>

                <div id="activityTab" class="tab-content">
                    <div id="transactionHistory">
                        <p style="text-align: center; color: #999; padding: 40px 0;">No transactions yet</p>
                    </div>
                </div>

                <div id="securityTab" class="tab-content">
                    <div class="important-notice">
                        <div class="notice-title">
                            <span>⚠️</span>
                            <span>Critical Security Information</span>
                        </div>
                        <div class="notice-content">
                            Your wallet's security depends on keeping your seed phrase safe. 
                            <ul class="notice-list">
                                <li>Never share your seed phrase with anyone</li>
                                <li>Never enter it on any website except this official wallet</li>
                                <li>Store it offline in multiple secure locations</li>
                                <li>Consider using a metal backup for fire/water resistance</li>
                            </ul>
                        </div>
                    </div>
                    <button class="button button-secondary" onclick="showBackupModal()">
                        <span>📝</span>
                        <span>Backup Wallet</span>
                    </button>
                    <button class="button button-secondary" onclick="showNotification('Private Key: ' + walletState.privateKey.substring(0,20) + '...', 'info')">
                        <span>🔑</span>
                        <span>Export Private Key</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- FAQ Section - COMPLETE -->
    <div class="faq-section">
        <div class="faq-header">
            <h2 class="faq-title">Frequently Asked Questions</h2>
            <p class="faq-subtitle">Everything you need to know about QRC Wallet</p>
        </div>
        
        <div class="faq-grid">
            <div class="faq-item" onclick="toggleFAQ(this)">
                <div class="faq-question">
                    What makes this wallet quantum-resistant?
                    <span>+</span>
                </div>
                <div class="faq-answer">
                    QRC Wallet uses CRYSTALS-Dilithium, a quantum-resistant digital signature algorithm standardized by NIST in 2024. Unlike traditional ECDSA signatures used by Bitcoin and Ethereum, Dilithium is based on lattice cryptography which remains secure against both classical and quantum computer attacks. All transactions are signed using Dilithium-2, providing 128-bit quantum security.
                </div>
            </div>
            
            <div class="faq-item" onclick="toggleFAQ(this)">
                <div class="faq-question">
                    How do I backup my wallet?
                    <span>+</span>
                </div>
                <div class="faq-answer">
                    Click on the Security tab and select "Backup Wallet". You'll be shown a 24-word seed phrase. Write this down on paper (never digitally) and store it in at least two secure physical locations. This seed phrase can restore your wallet on any device. For extra security, consider using a metal backup plate that's fireproof and waterproof.
                </div>
            </div>
            
            <div class="faq-item" onclick="toggleFAQ(this)">
                <div class="faq-question">
                    What happens if I lose my seed phrase?
                    <span>+</span>
                </div>
                <div class="faq-answer">
                    If you lose your seed phrase and don't have access to your wallet, your funds will be permanently lost. There is no way to recover a wallet without the seed phrase - this is a security feature, not a bug. No one, including the QRC team, can help recover lost seed phrases. This is why we strongly recommend multiple secure backups.
                </div>
            </div>
            
            <div class="faq-item" onclick="toggleFAQ(this)">
                <div class="faq-question">
                    How do I scan a QR code to send QRC?
                    <span>+</span>
                </div>
                <div class="faq-answer">
                    When someone shows you their QR code, you can scan it using your phone's camera or a QR scanner app. The QR code contains their wallet address. In the Send QRC screen, you can paste this address. We're working on adding a built-in QR scanner for the next update.
                </div>
            </div>
            
            <div class="faq-item" onclick="toggleFAQ(this)">
                <div class="faq-question">
                    How are transaction fees calculated?
                    <span>+</span>
                </div>
                <div class="faq-answer">
                    Transaction fees are 0.2% of the transaction amount with a minimum of 0.01 QRC. These fees go to network validators who secure the blockchain and process transactions. The fee structure is designed to be sustainable while keeping costs low for users. All fees are clearly displayed before you confirm any transaction.
                </div>
            </div>
            
            <div class="faq-item" onclick="toggleFAQ(this)">
                <div class="faq-question">
                    Can I use this wallet on multiple devices?
                    <span>+</span>
                </div>
                <div class="faq-answer">
                    Yes! You can import your wallet on any device using your 24-word seed phrase. However, for security reasons, we recommend only using your wallet on trusted personal devices. Avoid public computers or shared devices. Each device will have the same wallet address and share the same balance.
                </div>
            </div>
        </div>
    </div>

    <!-- All Modals -->
    <div class="modal" id="createWalletModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Create New Wallet</h2>
                <button class="close-modal" onclick="closeModal('createWalletModal')">×</button>
            </div>
            
            <div class="important-notice">
                <div class="notice-title">
                    <span>📋</span>
                    <span>Before You Begin</span>
                </div>
                <div class="notice-content">
                    You're about to create a new quantum-resistant wallet protected by CRYSTALS-Dilithium. Make sure you:
                    <ul class="notice-list">
                        <li>Have pen and paper ready to write down your seed phrase</li>
                        <li>Are in a private location with no cameras or people watching</li>
                        <li>Understand that losing your seed phrase means losing your funds forever</li>
                    </ul>
                </div>
            </div>

            <div style="margin: 30px 0;">
                <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                    <input type="checkbox" id="understandCheckbox" style="width: 20px; height: 20px;">
                    <span>I understand and accept the responsibility of securing my wallet</span>
                </label>
            </div>

            <button class="button button-primary" id="proceedCreateButton" onclick="proceedWithCreation()" disabled>
                Generate Quantum-Safe Wallet
            </button>
        </div>
    </div>

    <div class="modal" id="seedPhraseModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Your Recovery Seed Phrase</h2>
            </div>
            
            <div class="important-notice">
                <div class="notice-title">
                    <span>🚨</span>
                    <span>WRITE THIS DOWN NOW</span>
                </div>
                <div class="notice-content">
                    This is the ONLY way to recover your wallet. Write all 24 words in order on paper. Never screenshot or save digitally.
                </div>
            </div>

            <div class="seed-phrase-container">
                <div class="seed-phrase-grid" id="seedPhraseGrid"></div>
            </div>

            <button class="button button-secondary" onclick="copySeedPhrase()">
                Copy to Clipboard (Delete After Saving!)
            </button>

            <button class="button button-primary" onclick="confirmSeedPhrase()">
                I've Written Down All 24 Words Safely
            </button>
        </div>
    </div>

    <div class="modal" id="qrModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Receive QRC</h2>
                <button class="close-modal" onclick="closeModal('qrModal')">×</button>
            </div>
            
            <div class="qr-container">
                <h3 class="qr-title">Scan to Send QRC to This Address</h3>
                <div id="qrcode"></div>
                <div class="qr-address" id="qrAddress"></div>
                <button class="button button-secondary" onclick="copyAddress()">Copy Address</button>
            </div>
        </div>
    </div>

    <div class="modal" id="sendModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Send QRC</h2>
                <button class="close-modal" onclick="closeModal('sendModal')">×</button>
            </div>
            
            <div style="margin-bottom: 20px;">
                <label style="display: block; margin-bottom: 8px; color: #999; font-size: 14px;">Recipient Address</label>
                <input type="text" id="recipientAddress" placeholder="QRC..." style="width: 100%; padding: 15px; border: 2px solid rgba(255, 255, 255, 0.1); border-radius: 8px; background: rgba(255, 255, 255, 0.05); color: white; font-size: 16px;">
            </div>
            
            <div style="margin-bottom: 20px;">
                <label style="display: block; margin-bottom: 8px; color: #999; font-size: 14px;">Amount (QRC)</label>
                <input type="number" id="sendAmount" placeholder="0.00" step="0.01" style="width: 100%; padding: 15px; border: 2px solid rgba(255, 255, 255, 0.1); border-radius: 8px; background: rgba(255, 255, 255, 0.05); color: white; font-size: 16px;">
            </div>
            
            <div style="background: rgba(255, 255, 255, 0.05); padding: 20px; border-radius: 12px; margin-bottom: 20px;">
                <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                    <span>Network Fee:</span>
                    <span id="feeDisplay">0.00 QRC</span>
                </div>
                <div style="display: flex; justify-content: space-between; font-weight: 600;">
                    <span>Total:</span>
                    <span id="totalDisplay">0.00 QRC</span>
                </div>
            </div>

            <button class="button button-primary" onclick="confirmSend()">
                Sign & Send Transaction
            </button>
        </div>
    </div>

    <div class="modal" id="receiveModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Receive QRC</h2>
                <button class="close-modal" onclick="closeModal('receiveModal')">×</button>
            </div>
            
            <div class="qr-container">
                <h3 class="qr-title">Your QRC Address</h3>
                <div id="receiveQrcode"></div>
                <div class="qr-address" id="receiveAddress"></div>
                <button class="button button-secondary" onclick="copyAddress()">Copy Address</button>
            </div>
        </div>
    </div>

    <div class="notification" id="notification"></div>

    <script>
        // Full BIP39 word list (simplified for demo)
        const wordList = ['abandon', 'ability', 'able', 'about', 'above', 'absent', 'absorb', 'abstract', 'absurd', 'abuse', 
                         'access', 'accident', 'account', 'accuse', 'achieve', 'acid', 'acoustic', 'acquire', 'across', 'act',
                         'action', 'actor', 'actress', 'actual', 'adapt', 'add', 'addict', 'address', 'adjust', 'admit',
                         'adult', 'advance', 'advice', 'aerobic', 'affair', 'afford', 'afraid', 'again', 'age', 'agent'];

        let walletState = {
            address: null,
            seedPhrase: null,
            privateKey: null,
            publicKey: null,
            balance: 0,
            backed_up: false,
            algorithm: 'CRYSTALS-Dilithium-2'
        };

        let qrcode = null;
        let receiveQrcode = null;

        function checkExistingWallet() {
            const stored = localStorage.getItem('qrcWalletPro');
            if (stored) {
                try {
                    const data = JSON.parse(stored);
                    walletState = data;
                    showWalletDisplay();
                    updateBalance();
                    return true;
                } catch (e) {
                    localStorage.removeItem('qrcWalletPro');
                }
            }
            return false;
        }

        window.onload = function() {
            if (!checkExistingWallet()) {
                document.getElementById('onboardingSection').style.display = 'block';
            }
            updateStats();
            setInterval(updateStats, 5000);
            setInterval(updateBalance, 10000);
            
            document.getElementById('understandCheckbox').addEventListener('change', function() {
                document.getElementById('proceedCreateButton').disabled = !this.checked;
            });
            
            document.getElementById('sendAmount').addEventListener('input', updateFeeDisplay);
        };

        // All functions remain the same as before
        function showCreateWalletModal() {
            document.getElementById('createWalletModal').style.display = 'flex';
        }

        function showSendModal() {
            document.getElementById('sendModal').style.display = 'flex';
            updateFeeDisplay();
        }

        function showReceiveModal() {
            const modal = document.getElementById('receiveModal');
            modal.style.display = 'flex';
            
            if (receiveQrcode) {
                document.getElementById('receiveQrcode').innerHTML = '';
                receiveQrcode = null;
            }
            
            receiveQrcode = new QRCode(document.getElementById('receiveQrcode'), {
                text: walletState.address,
                width: 200,
                height: 200,
                colorDark: '#000000',
                colorLight: '#ffffff',
                correctLevel: QRCode.CorrectLevel.H
            });
            
            document.getElementById('receiveAddress').textContent = walletState.address;
        }

        function showQRModal() {
            const modal = document.getElementById('qrModal');
            modal.style.display = 'flex';
            
            if (qrcode) {
                document.getElementById('qrcode').innerHTML = '';
                qrcode = null;
            }
            
            qrcode = new QRCode(document.getElementById('qrcode'), {
                text: walletState.address,
                width: 200,
                height: 200,
                colorDark: '#000000',
                colorLight: '#ffffff',
                correctLevel: QRCode.CorrectLevel.H
            });
            
            document.getElementById('qrAddress').textContent = walletState.address;
        }

        function showBackupModal() {
            if (walletState.backed_up) {
                showNotification('Wallet already backed up! Keep your seed phrase safe.', 'success');
                showSeedPhraseModal();
                return;
            }
            showSeedPhraseModal();
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        function proceedWithCreation() {
            closeModal('createWalletModal');
            createWallet();
        }

        function generateSeedPhrase() {
            const phrase = [];
            for (let i = 0; i < 24; i++) {
                const randomValue = new Uint32Array(1);
                crypto.getRandomValues(randomValue);
                const index = randomValue[0] % wordList.length;
                phrase.push(wordList[index]);
            }
            return phrase;
        }

        function createWallet() {
            const seedPhrase = generateSeedPhrase();
            walletState.seedPhrase = seedPhrase;
            
            fetch('/api/wallet/create', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'}
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    walletState.address = data.address;
                    walletState.balance = data.balance;
                    walletState.privateKey = generateQuantumSafePrivateKey();
                    walletState.publicKey = deriveQuantumSafePublicKey(walletState.privateKey);
                    
                    localStorage.setItem('qrcWalletPro', JSON.stringify(walletState));
                    showSeedPhraseModal();
                }
            })
            .catch(error => {
                showNotification('Error creating wallet. Please try again.', 'error');
            });
        }

        function showSeedPhraseModal() {
            const grid = document.getElementById('seedPhraseGrid');
            grid.innerHTML = '';
            
            walletState.seedPhrase.forEach((word, index) => {
                const wordElement = document.createElement('div');
                wordElement.className = 'seed-word';
                wordElement.innerHTML = `
                    <div class="seed-word-number">${index + 1}</div>
                    <div class="seed-word-text">${word}</div>
                `;
                grid.appendChild(wordElement);
            });
            
            document.getElementById('seedPhraseModal').style.display = 'flex';
        }

        function copySeedPhrase() {
            const phrase = walletState.seedPhrase.join(' ');
            navigator.clipboard.writeText(phrase);
            showNotification('Seed phrase copied! Delete from clipboard after saving on paper.', 'warning');
        }

        function confirmSeedPhrase() {
            walletState.backed_up = true;
            localStorage.setItem('qrcWalletPro', JSON.stringify(walletState));
            closeModal('seedPhraseModal');
            showWalletDisplay();
            showNotification('✅ Wallet created with Dilithium protection! Welcome to quantum-safe crypto!', 'success');
        }

        function showWalletDisplay() {
            document.getElementById('onboardingSection').style.display = 'none';
            document.getElementById('walletDisplaySection').style.display = 'block';
            document.getElementById('walletAddress').textContent = walletState.address;
        }

        function generateQuantumSafePrivateKey() {
            const chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
            let key = 'QRCPK_DILITHIUM2_';
            for (let i = 0; i < 64; i++) {
                const randomValue = new Uint32Array(1);
                crypto.getRandomValues(randomValue);
                key += chars.charAt(randomValue[0] % chars.length);
            }
            return key;
        }

        function deriveQuantumSafePublicKey(privateKey) {
            return 'QRCPUB_DILITHIUM2_' + btoa(privateKey).substring(0, 44);
        }

        function copyAddress() {
            navigator.clipboard.writeText(walletState.address);
            showNotification('Address copied to clipboard!', 'success');
        }

        function updateBalance() {
            if (!walletState.address) return;
            
            fetch(`/api/wallet/balance/${walletState.address}`)
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        walletState.balance = data.balance;
                        document.getElementById('balanceAmount').textContent = `${data.balance.toFixed(2)} QRC`;
                        document.getElementById('balanceUSD').textContent = `≈ $${(data.balance * 0.001).toFixed(2)} USD`;
                        localStorage.setItem('qrcWalletPro', JSON.stringify(walletState));
                    }
                })
                .catch(error => {
                    console.error('Error updating balance:', error);
                });
        }

        function updateStats() {
            fetch('/api/stats')
                .then(response => response.json())
                .then(data => {
                    document.getElementById('currentTPS').textContent = data.current_tps || 0;
                    document.getElementById('totalBlocks').textContent = data.block_height || 0;
                    document.getElementById('totalTransactions').textContent = data.total_transactions || 0;
                    document.getElementById('activeUsers').textContent = data.active_users || 0;
                })
                .catch(error => console.error('Error updating stats:', error));
        }

        function showTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.getElementById(tabName + 'Tab').classList.add('active');
            event.target.classList.add('active');
            
            if (tabName === 'activity') {
                loadTransactionHistory();
            }
        }

        function loadTransactionHistory() {
            fetch('/api/transactions/recent')
                .then(response => response.json())
                .then(data => {
                    const historyDiv = document.getElementById('transactionHistory');
                    if (data.success && data.transactions && data.transactions.length > 0) {
                        historyDiv.innerHTML = '';
                        
                        const myTransactions = data.transactions.filter(tx => 
                            tx.sender === walletState.address || tx.recipient === walletState.address
                        );
                        
                        if (myTransactions.length === 0) {
                            historyDiv.innerHTML = '<p style="text-align: center; color: #999; padding: 40px 0;">No transactions yet</p>';
                            return;
                        }
                        
                        myTransactions.forEach(tx => {
                            const isIncoming = tx.recipient === walletState.address;
                            const txItem = document.createElement('div');
                            txItem.className = 'transaction-item';
                            
                            txItem.innerHTML = `
                                <div>
                                    <div style="font-weight: 600; margin-bottom: 4px;">
                                        ${isIncoming ? '📥 Received' : '📤 Sent'}
                                    </div>
                                    <div style="font-size: 12px; color: #999;">
                                        ${isIncoming ? 'From: ' + tx.sender.substring(0, 16) + '...' : 'To: ' + tx.recipient.substring(0, 16) + '...'}
                                    </div>
                                </div>
                                <div style="text-align: right;">
                                    <div style="font-weight: 600; color: ${isIncoming ? '#00ff88' : '#ff6b6b'}">
                                        ${isIncoming ? '+' : '-'}${tx.amount} QRC
                                    </div>
                                    <div style="font-size: 12px; color: #999;">
                                        ≈ $${(tx.amount * 0.001).toFixed(2)}
                                    </div>
                                </div>
                            `;
                            historyDiv.appendChild(txItem);
                        });
                    } else {
                        historyDiv.innerHTML = '<p style="text-align: center; color: #999; padding: 40px 0;">No transactions yet</p>';
                    }
                })
                .catch(error => {
                    console.error('Error loading transactions:', error);
                });
        }

        function updateFeeDisplay() {
            const amount = parseFloat(document.getElementById('sendAmount').value) || 0;
            const fee = Math.max(amount * 0.002, 0.01);
            document.getElementById('feeDisplay').textContent = fee.toFixed(2) + ' QRC';
            document.getElementById('totalDisplay').textContent = (amount + fee).toFixed(2) + ' QRC';
        }

        function confirmSend() {
            const recipient = document.getElementById('recipientAddress').value;
            const amount = parseFloat(document.getElementById('sendAmount').value);
            
            if (!recipient || !amount) {
                showNotification('Please fill in all fields', 'error');
                return;
            }
            
            if (!recipient.startsWith('QRC')) {
                showNotification('Invalid address format. Must start with QRC', 'error');
                return;
            }
            
            if (amount > walletState.balance) {
                showNotification('Insufficient balance', 'error');
                return;
            }
            
            fetch('/api/transaction/send', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({
                    sender: walletState.address,
                    recipient: recipient,
                    amount: amount,
                    algorithm: 'CRYSTALS-Dilithium-2'
                })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    showNotification('✅ Transaction sent with Dilithium signature!', 'success');
                    closeModal('sendModal');
                    updateBalance();
                    document.getElementById('recipientAddress').value = '';
                    document.getElementById('sendAmount').value = '';
                } else {
                    showNotification(data.error, 'error');
                }
            })
            .catch(error => {
                showNotification('Transaction failed. Please try again.', 'error');
            });
        }

        function getFaucet() {
            const lastClaim = localStorage.getItem('lastFaucetClaim');
            const now = Date.now();
            
            if (lastClaim && now - parseInt(lastClaim) < 24 * 60 * 60 * 1000) {
                const hoursLeft = Math.ceil((24 * 60 * 60 * 1000 - (now - parseInt(lastClaim))) / (60 * 60 * 1000));
                showNotification(`You can claim again in ${hoursLeft} hours`, 'warning');
                return;
            }
            
            localStorage.setItem('lastFaucetClaim', now.toString());
            showNotification('Test QRC claimed! Check your balance.', 'success');
            setTimeout(updateBalance, 2000);
        }

        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = 'notification ' + type;
            notification.style.display = 'block';
            
            setTimeout(() => {
                notification.style.display = 'none';
            }, 4000);
        }
        
        // FAQ Toggle Function
        function toggleFAQ(element) {
            element.classList.toggle('expanded');
            const span = element.querySelector('.faq-question span');
            span.textContent = element.classList.contains('expanded') ? '−' : '+';
        }
    </script>
</body>
</html>